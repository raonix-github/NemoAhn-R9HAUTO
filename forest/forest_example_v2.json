# ------------------------------------------------------------------------------
#  methods  - get / set / report
#
#  - get.{devtype}.devinfo
#  - get.{devtype}.state.{idx}
#  - get.{devtype}.config.{idx}
#
#  - set.{devtype}.state.{idx}
#  - set.{devtype}.config.{idx}
#
#  - report.{devtype}.state.{idx}
#
#  - get.gateway.getdevinfo
#
#  - get.system.time
#  - get.system.info
#  - set.system.upgrade
# ------------------------------------------------------------------------------

# ------------------------------------------------------------------------------
#  기기정보 요청(특성)
#  -
# ------------------------------------------------------------------------------
# request
{
  "jsonrpc": "2.0",
  "method": "get.forest.devinfo",
  "id": null,
  "params": null
}

# response
{
  "jsonrpc":"2.0”,
  "id":null,
  "result": [
    { 
      "idx":1, 
      "id":"8a12345678", 
      "name":"homebox1", 
      "connected":true,
      "roomconcnt":1
    },
    { 
      "idx":2, 
      "id":"8a23455608", 
      "name":"hombox2", 
      "connected":true,
      "roomconcnt":1
    }
  ]
}

# ------------------------------------------------------------------------------
#  상태요청
#  -
# ------------------------------------------------------------------------------
# request
{
  "jsonrpc": "2.0",
  "method": "get.forest.state.1",
  "id": null,
  "params": null
}

# response
{
  "jsonrpc":"2.0”,
  "id":null,
  "result": {
    "connection":true,
    "roomcons": [
    {
      "rcidx": 1,
      "power":true,
      "heating":true,
      "schedule":true,
      "intervaltimer":true,
      "intervaltimeval":30,
      "curtemp":25.0,
      "settemp":32.0
    }
    ],
    "keytag":true,
    "motiondetect":true,
    "notmovement":true,
    "gasleakdetect":true,
    "firedetect":true,
    "batchlight":true,
    "outsidelight": false,
    "induction":true,
    "securityon":true,
    "doorlock": true
  }
}

# ------------------------------------------------------------------------------
#  제어
#  -
# ------------------------------------------------------------------------------
# request
{
  "jsonrpc": "2.0",
  "id": null,
  "method": "set.forest.state.1",
  "params": {
    "roomcons": [
      {
        "rcidx": 1,
        "power": true,
        "settemp": 33
      }
    ],
    "batchlight":true,
    "induction":true,
    "securityon":true
  }
}

# ACK
{
  "jsonrpc": "2.0",
  "id":null,
  "result": "success"
}

# ------------------------------------------------------------------------------
#  설정값 요청
#  -
# ------------------------------------------------------------------------------
# request
{
  "jsonrpc": "2.0",
  "method": "get.forest.config.1",
  "id": null,
  "params": null
}

# response
{
  "jsonrpc":"2.0”,
  "id":null,
  "result": {
    "motiontime": 8,
    "gogouttime": 3,
    "roomcontemptime": 2,
    "roomcontempmax": 45,
    "roomcontempmin": 5,
    "roomconpresetenable": true,
    "roomconpresettemp": 25,
    "roomconpresettime": 30
  }
}

# ------------------------------------------------------------------------------
#  설정값 설정
#  -
# ------------------------------------------------------------------------------
# request
{
  "jsonrpc": "2.0",
  "method": "set.forest.config.1",
  "id": null,
  "params": {
    "motiontime": 8,
    "gogouttime": 3,
    "roomcontemptime": 2,
    "roomcontempmax": 45,
    "roomcontempmin": 5,
    "roomconpresetenable": true,
    "roomconpresettemp": 25,
    "roomconpresettime": 30
  }
}

# ACK
{
  "jsonrpc":"2.0”,
  "id":null,
  "result": "success"
}

# ------------------------------------------------------------------------------
#  report
#  -
# ------------------------------------------------------------------------------
{
  "jsonrpc":"2.0”,
    "method": "report.forest.state.1",
    "id":null,
    "result": {
      "connection":true,
      "roomcons": [
      {
        "rcidx": 1,
        "power":true
      }
      ],
        "firedetect":true
    }
}

# ------------------------------------------------------------------------------
#  제어 디바이스 정보
#  -
# ------------------------------------------------------------------------------
# request
{
  "jsonrpc": "2.0",
  "method": "get.gateway.devinfo",
  "id": null,
  "params": null
}

# response
{
  "jsonrpc":"2.0”,
  "id":null,
  "result": [
    {
      "type":"thermostat",
      "devids":
        [
          {"id":"360102000001", "connected":true},
          {"id":"360102000002", "connected":true},
          {"id":"360102000003", "connected":false}
        ]
    },
    {
      "type":"light",
      "devids":
        [
          {"id":"0e0102000001", "connected":true},
          {"id":"0e0102000001", "connected":false}
        ]
    },
    {
      "type":"forest",
      "devids":
        [
          {"id":"8a0102000001", "connected":true},
          {"id":"8a0102000002", "connected":true},
          {"id":"8a0102000003", "connected":true},
          {"id":"8a0102000004", "connected":true},
          {"id":"8a0102000005", "connected":true},
          {"id":"8a0102000006", "connected":false},
          {"id":"8a0102000007", "connected":true},
          {"id":"8a0102000008", "connected":true},
          {"id":"8a0102000009", "connected":true},
          {"id":"8a0102000011", "connected":true},
          {"id":"8a0102000012", "connected":false}
        ]
    }
  ]
}


# ------------------------------------------------------------------------------
# System  
#  -
# ------------------------------------------------------------------------------
# get system-time
{
  "jsonrpc": "2.0",
  "id": null,
  "method": "get.system.time",
  "params": null
}
# reply system-time
{
  "jsonrpc": "2.0",
  "id": null,
  "result": {
    "year": 2015,
    "month":9,
    "day":7,
    "hour":16,
    "min":49,
    "sec":52
  }
}

# get system-info
{
  "jsonrpc": "2.0",
  "id": null,
  "method": "get.system.info",
  "params": null
}
# reply system-info
{
  "jsonrpc": "2.0",
  "id": null,
  "result": {
    "type":"gateway",
    "vendor":"raonix",
    "model" :"dj230",
    "swver":"2.1.0",
    "hwver":"1.0.0",
    "buildcode":"1"
  }
}

# set system-upgrade
{
  "jsonrpc": "2.0",
  "id": null,
  "method": "set.system.upgrade",
  "params": {
    "now": true,
    "newversion": "2.0.1",
    "filename": "upgrade.bin"
  }
}
